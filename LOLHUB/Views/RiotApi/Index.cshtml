@*@model IEnumerable<RiotApi.Models.SummonerInfoModel>;*@
@model LOLHUB.Models.SummonerViewModels.SummonersAndMachHistories;

<h2>@ViewBag.SummonnerIsAlreadyAssigned</h2>

@if (TempData["SummonerDontExists"] == null)
{
    <h3>Dane Przywoływacza:</h3>

    <table class="table table-striped table-bordered table-lg">
        <tr>
            <th class="text-left">Nickname</th>
            <th class="text-left">ID</th>
            <th class="text-left">Poziom Przywoływacza</th>
            <td class="text-left">Konto Zweryfikowane ?</td>
            <td class="text-left">Właściciel</td>
        </tr>
        <tr>
            @foreach (var summoner in Model.Summoner)
            {
                <td class="text-left">@summoner.name</td>
                <td class="text-left">@summoner.id</td>
                <td class="text-left">@summoner.summonerLevel</td>
                <td class="text-left">@summoner.IsVerified</td>
                <td class="text-left">@summoner.ConectedAccount</td>
            }
        </tr>
    </table>

    if (Model.Summoner.Where(s => s.IsVerified == false).Any())
    {
            <div class="btn-toolbar mb-4" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group">
                    <form asp-controller="riotapi" asp-action="regenerateCode" method="post">
                        <input type="hidden" id="id" name="id" value="@Model.Summoner.Select(s=>s.id)" />
                        <button type="submit" class="btn btn-danger">Generuj Nowy Kod Weryfikacyjny</button>
                    </form>
                </div>

                <div class="input-group">
                    <input runat="server" readonly="readonly" id="id" type="text" class="form-control text-center" style="font-size:larger; font-weight:500;" Value=@Model.Summoner.Select(s=>s.Code) aria-describedby="btnGroupAddon" maxlength="20" size="22" />
                </div>
                <div class="btn-group" style="margin-right:20px">
                    <form asp-controller="riotapi" asp-action="Check" method="post">
                        <input type="hidden" id="id" name="id" value="@Model.Summoner.Select(s=>s.id)" />
                        <input type="hidden" id="code" name="code" value=@Model.Summoner.Select(s=>s.Code) />
                        <button type="submit" class="btn btn-warning">Weryfikuj</button>
                    </form>
                </div>
            </div>

    }
    else
    {
            <p class="text-info">Twoje konto jest już sparowane z aplikacją LOLHUB :)</p>


            <h4>Statystkiki ostatnich rozegranych meczy:</h4>

            <table class="table table-striped table-bordered table-lg">
                <tr>
                    @*<th class="text-left">Id</th>*@
                    <th class="text-left">MatchId</th>
                    <th class="text-left">SummonerName</th>
                    <td class="text-left">Kills</td>
                    <td class="text-left">Deaths</td>
                    <td class="text-left">Assists</td>
                    <td class="text-left">ChampionId</td>
                    <td class="text-left">Win</td>
                    <td class="text-left">GameDuration</td>
                </tr>
                @foreach (var MatchStats in Model.GameStatistics) {
                <tr>
                    @*<td class="text-left">@MatchStats.Id</td>*@
                    <td class="text-left">@MatchStats.MatchSelectedData.Id</td>
                    <td class="text-left">@MatchStats.SummonerName</td>
                    <td class="text-left">@MatchStats.Kills</td>
                    <td class="text-left">@MatchStats.Deaths</td>
                    <td class="text-left">@MatchStats.Assists</td>
                    <td class="text-left">@MatchStats.ChampionId</td>
                    <td class="text-left">@MatchStats.Win</td>
                    <td class="text-left">@MatchStats.GameDuration</td>
                </tr>
                }
            </table>
        }
}